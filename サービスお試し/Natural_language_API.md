# 簡単なまとめ  
Natural language APIはgoogleが提供する学習済み言語モデルのAPIである。  
ユーザーは学習やメンテナンスなしに、sentiment分析, entitiy分析を行うことができる。  
  
今回実験としてefootのストアレビューデータを手動でコピペして食わせてみた。  
汎用言語モデルとしてはいい感じであるが、  
レヴュー分析モデルとしては、レヴューに関係ない文の扱いや、ドメイン知識の面で難ありという印象だった。  

# Natural language APIに関して  
Googleが学習、管理している自然言語処理用のAPI。  
学習不要で使用可能。  
とにかくすぐに/簡単に使えるのがメリット

# 料金
![image](https://user-images.githubusercontent.com/54636129/221351846-296a3732-229e-4e1c-a9b7-e55c5d8ffba1.png)  
   
料金は5000件以降は1000件ごとに$1のコストがかかる。  
思ったより安い？  

# 機能  
- sentiment
  - positive / negativeを判定。  
- entitiy detection
  - 文章中に登場するentity(話題？)を抽出し、それに対してタグをつける。
- category
  - 何に関する文なのかを判断。現状日本語非対応。

さっと試すだけなら[こちら](https://cloud.google.com/natural-language?hl=ja)から実践可能。
# 実験  
google play storeから手動で取ってきたストアレビューを用いて検証  

# 結果
- sentiment analysis  
>ディフェンスとオフェンスのドリブル時のバランスが良くなっている。ただセカンドボールへの反応が悪すぎるので、そこを改善してもらえるとありがたいです。  
⇒ ディフェンスとオフェンスのドリブル時のバランスが良くなっている。 / 0.8999999761581421  
⇒ ただセカンドボールへの反応が悪すぎるので、そこを改善してもらえるとありがたいです。/ -0.6000000238418579  

文章を自動で文に分割し、文ごとにsentimentを評価してくれるので、一つのコメントで複数内容に関して言及あっても評価が可能。    
(文章全体のsentimentも算出できるが、今回は実験実施なし。)  
  
ただ、レビュー分析に特化したモデルではないので、関係ないような文に対してもポジティブ/ネガティブ度が高ければ、ポジティブな文として評価されてしまう。  
汎用モデルの悪いところが出ている..   
>次回26年ワールドカップ楽しみです！ / 0.8999999761581421  
>どんな違った日本代表がみれるかいろんな賛否両論ありますが森保監督に期待したいと思います！ / 0.8999999761581421  


- entitiy analysis  
>ディフェンスとオフェンスのドリブル時のバランスが良くなっている。ただセカンドボールへの反応が悪すぎるので、そこを改善してもらえるとありがたいです。  
⇒
1	ディフェンス	OTHER  
1	オフェンス	OTHER  
1	ドリブル	OTHER  
1	バランス	OTHER  
1	セカンドボール	CONSUMER_GOOD  
1	反応	EVENT  
  
entitiyは重要な名詞の列挙のような機能の印象。  
だた、レヴューの側面からは重要な項目がOthersに割り振られていたりするので、entityのtype機能はあてにならなそうである。  
  
# 結論と考察  
NLP APIはレヴュー分析専門のモデルではないため、レビューの分析に使うには一工夫必要な印象がある。  
sentiment分析は文の内容だけ見れば納得感ある結果を返すが、  
レヴューの観点から見ると重要ではないような分も、positive / negative度が高く算出されてしまう。  
これはおそらく、Natural language APIはレビュー文以外にも多彩な分を用いて学習しているためであろう。  
この部分を克服するには自前でレビュー文のみを学習したモデルを作る必要があると思われる。    
  
entitiy analysisは文中で使われている重要な名詞を返す機能のように見える。  
レビュー分析専門のモデルではないので、entity typeはあまりあてにならない。。  
  

# 参考
[プロダクト概要](https://cloud.google.com/natural-language/docs/basics?hl=ja)  
[クライアントライブラリ](https://cloud.google.com/natural-language/docs/reference/libraries)
[やってみたブログ](https://oc-technote.com/python/google-cloud-natural-language-extract-japanese-address/)
